function checknum(){num=Math.floor(1e4*Math.random()),num>1e3?$("#checknum").html(num):checknum()}function checkMessagenum(){num1=Math.floor(1e4*Math.random()),num1>1e3?alert(num1):checkMessagenum()}function runTime(r,e){var s=setInterval(function(){e--,$(r).val("重新获取:"+e),0==e&&(clearInterval(s),$(r).removeAttr("disabled").css({background:"red"}).val("点击获取验证码"))},1e3)}$("#top").load("../base/Top1.html"),checknum(),$("#First").bind("change",function(){$("#Error").css("display","none"),"phone"==$(this).val()&&($("#t1").val("").attr("placeholder","请输入手机号码"),$("#phone").css("borderColor","#e3e2e2"),$("#Error").css("display","none"),$("#sp1,#t2").css("borderColor","#e3e2e2"),$("#Error1").css("display","none"),$("#sp2,#t3").css("borderColor","#e3e2e2"),$("#Error2").css("display","none"),$("#Password").css("borderColor","#e3e2e2"),$("#Message").css("display","block"),$("#Confirm").css("borderColor","#e3e2e2"),$("#Error3").css("display","none"),$("#Error4").css("display","none"),checknum()),"Email"==$(this).val()&&($("#t1").val("").attr("placeholder","请输入邮箱号"),$("#phone").css("borderColor","#e3e2e2"),$("#Error").css("display","none"),$("#sp1,#t2").css("borderColor","#e3e2e2"),$("#Error1").css("display","none"),$("#Message").css("display","none"),$("#Error2").css("display","none"),$("#Password").css("borderColor","#e3e2e2"),$("#Confirm").css("borderColor","#e3e2e2"),$("#Error3").css("display","none"),$("#Error4").css("display","none"),checknum())}),$("#Sure").mousedown(function(r){if(r.preventDefault(),$("input[name='Check1']").is(":checked")&&flag1&&flag2&&flag3&&flag4&&flag5){var e=$("#t1").val(),s=$("#t4").val(),o="http://10.17.158.241:8081/Product/GetProductById_get",c={dataType:"jsonp",data:{id:e,type:"username"},success:function(r){if(r)alert("用户已存在");else{var o={uName:"username",uPassword:"userpassword"};$("#Sure").css({background:"#e95053",lineHeight:"44px"}).addClass("Sure");var c={userNmae:e,userPassword:s},n="http://10.17.158.241:8081/Product/CreateUpdateProduct_get",t={type:"get",dataType:"jsonp",data:{id:e,datajson:JSON.stringify(c),type:o.uName},success:function(){alert("注册成功")},error:function(){alert("注册失败")},complete:function(){window.location.href="sign-in.html"}};$.ajax(n,t)}},error:function(){alert("登录失败")}};$.ajax(o,c)}}).mouseup(function(){$("#Sure").css({background:"#e1373a",lineHeight:"40px"})}),$(".Sure").mousedown(function(r){r.preventDefault(),$(this).css({lineHeight:"45px",background:"#ea7173"})}).mouseup(function(){$(this).css({background:"#e1373a",lineHeight:"40px"})}),$("#checknum").mousedown(function(r){r.preventDefault(),$(this).html(""),checknum(),checksign.checkNumber()}).hover(function(){$(this).css("cursor","pointer")}),$("#t1").blur(function(){0==$("#t1").val().length&&("phone"==$("#First").val()?($("#Error").css("display","block").text("请输入手机号"),$("#phone").css("border-color","red")):($("#Error").css("display","block").text("请输入邮箱"),$("#phone").css("border-color","red")))}).focus(function(){$(this).keyup(function(){"phone"==$("#First").val()?(checksign.phone(),0==$("#t1").val().length&&$("#Error").text("请输入手机号")):(checksign.Email(),0==$("#t1").val().length&&$("#Error").text("请输入邮箱"))})}),$("#t2").blur(function(){0==$("#t2").val().length&&($("#Error1").css("display","block").text("请输入验证码"),$("#sp1,#t2").css("border-color","red"))}).focus(function(){0==$("#t2").val().length&&$("#Error1").css("display","block").text("请输入验证码"),$(this).keyup(function(){checksign.checkNumber()})}),$("#b1").on("click",function(){$(this).val("重新获取:10"),$(this).css({background:"black"}).attr("disabled","true").addClass("b1"),runTime("#b1",10),checkMessagenum()}),$("#t3").blur(function(){0==$("#t3").val().length&&($("#sp2,#t3").css("borderColor","red"),$("#Error2").css("display","block").text("请输入短信验证码"))}).focus(function(){$(this).keyup(function(){checksign.checkMessage()})}),$("#t4").blur(function(){0==$("#t4").val().length&&($("#Password").css("borderColor","red"),$("#Error3").css("display","block").text("请输入密码"))}).focus(function(){$(this).keyup(function(){checksign.checkPassword()})}),$("#t5").blur(function(){0==$(this).val().length?($("#Confirm").css("borderColor","red"),$("#Error4").css("display","block").text("两次密码输入不一致")):$("#t4").val()==$("#t5").val()?($("#Password").css("borderColor","#e3e2e2"),$("#Error3").css("display","none"),flag5=!0):($("#Confirm").css("borderColor","red"),$("#Error4").css("display","block").text("两次密码输入不一致"),flag5=!1)}).focus(function(){0==$("#t4").val().length&&($("#Password").css("borderColor","red"),$("#Error3").css("display","block").text("请输入密码")),$(this).keyup(function(){$("#t4").val()==$("#t5").val()&&($("#Confirm").css("borderColor","#e3e2e2"),$("#Error4").css("display","none"))})});var flag1=!1,flag2=!1,flag3=!1,flag4=!1,flag5=!1,checksign={phone:function(){var r=/^1[3458]{1}[0-9]{9}$/;r.test($("#t1").val())?($("#phone").css("borderColor","#e3e2e2"),$("#Error").css("display","none"),flag1=!0):($("#phone").css("border-color","red"),$("#Error").css("display","block").text("手机号输入格式有误"),flag1=!1)},Email:function(){var r=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;r.test($("#t1").val())?($("#phone").css("borderColor","#e3e2e2"),$("#Error").css("display","none"),flag1=!0):($("#phone").css("borderColor","red"),$("#Error").css("display","block").text("邮箱输入格式有误"),flag1=!1)},checkNumber:function(){parseInt($("#t2").val())!==num?($("#sp1,#t2").css("borderColor","red"),$("#Error1").css("display","block").text("验证码输入错误"),flag2=!1):($("#sp1,#t2").css("borderColor","#e3e2e2"),$("#Error1").css("display","none"),flag2=!0)},checkMessage:function(){parseInt($("#t3").val())!==num1?($("#sp2,#t3").css("borderColor","red"),$("#Error2").css("display","block").text("短信验证码输入错误"),flag3=!1):($("#sp2,#t3").css("borderColor","#e3e2e2"),$("#Error2").css("display","none"),flag3=!0)},checkPassword:function(){var r=/^[a-zA-Z]\w{5,19}$/;r.test($("#t4").val())?($("#Password").css("borderColor","#e3e2e2"),$("#Error3").css("display","none"),flag4=!0):($("#Password").css("borderColor","red"),$("#Error3").css("display","block").text("以字母开头，长度在6~20，只能包含字符、数字和下划线"),flag4=!1)}},num,num1;